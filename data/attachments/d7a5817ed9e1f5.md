# Test info

- Name: Баги по товарам >> Изменение количества товара в корзине
- Location: /home/runner/work/QA.GURU_Repo_AcademyBugs/QA.GURU_Repo_AcademyBugs/specs/productsBugs.spec.js:135:3

# Error details

```
Error: locator.waitFor: Test timeout of 60000ms exceeded.
Call log:
  - waiting for locator('#ec_quantity')

    at ProductCardPage.updateQuantity (/home/runner/work/QA.GURU_Repo_AcademyBugs/QA.GURU_Repo_AcademyBugs/sources/pages/productCardPage.js:122:34)
    at /home/runner/work/QA.GURU_Repo_AcademyBugs/QA.GURU_Repo_AcademyBugs/specs/productsBugs.spec.js:140:29
```

# Page snapshot

```yaml
- text: Manage consent
- link "Skip to content":
  - /url: "#sq-content"
- banner:
  - heading "AcademyBugs.com" [level=3]:
    - link "AcademyBugs.com":
      - /url: https://academybugs.com/
  - navigation:
    - list:
      - listitem:
        - link "Examples of Bugs":
          - /url: https://academybugs.com/
      - listitem:
        - link "Types of Bugs":
          - /url: https://academybugs.com/types/
      - listitem:
        - link "Find Bugs":
          - /url: https://academybugs.com/find-bugs/
      - listitem:
        - link "Report Bugs":
          - /url: https://academybugs.com/report-bugs/
      - listitem:
        - link "":
          - /url: "#"
- main:
  - article:
    - text: SHOPPING CART  CHECKOUT DETAILS  SUBMIT PAYMENT
    - table:
      - rowgroup:
        - row "Product Price Quantity Total":
          - cell "Product"
          - cell "Price"
          - cell "Quantity"
          - cell "Total"
      - rowgroup:
        - row " Flamingo Tshirt Flamingo Tshirt $15.14 - 1 + UPDATE $15.14":
          - cell ""
          - cell "Flamingo Tshirt":
            - img "Flamingo Tshirt"
          - cell "Flamingo Tshirt":
            - link "Flamingo Tshirt":
              - /url: https://academybugs.com/store/flamingo-tshirt/
          - cell "$15.14"
          - cell "- 1 + UPDATE":
            - table:
              - rowgroup:
                - row "- 1 +":
                  - cell "-":
                    - button "-"
                  - cell "1":
                    - spinbutton: "1"
                  - cell "+":
                    - button "+"
                - row "UPDATE":
                  - cell "UPDATE"
          - cell "$15.14"
    - text: Cart Totals Cart Subtotal $15.14 Shipping $7.99 Grand Total $123.13
    - link "Checkout":
      - /url: https://academybugs.com/my-cart/?ec_page=checkout_info
    - link "Continue Shopping":
      - /url: https://academybugs.com/store/
    - text: Coupon
    - textbox "Enter Coupon Code"
    - text: Apply Coupon Gift Card
    - textbox "Enter Gift Card"
    - text: Redeem Gift Card
- heading "Select a Currency" [level=4]
- combobox:
  - option "USD" [selected]
  - option "EUR"
  - option "GBP"
  - option "JPY"
- heading "Product Search" [level=4]
- combobox
- button "Search"
- heading "Hot Item" [level=4]
- link:
  - /url: https://academybugs.com/anchor-bracelet
  - img
- link "Silver Heart Bracelet":
  - /url: https://academybugs.com/anchor-bracelet
- text: $275.00
- heading "Store Menu" [level=4]
- list:
  - listitem:
    - link "All Items":
      - /url: https://academybugs.com/store/all-items/
  - listitem:
    - link "Accessories [+]":
      - /url: "#"
  - listitem:
    - link "Fashion Type [+]":
      - /url: "#"
  - listitem:
    - link "Women's Pants":
      - /url: https://academybugs.com/store/womens-pants/
- heading "Filter by Price" [level=4]
- link "$15.00 - $19.99 (1)":
  - /url: https://academybugs.com/my-cart/?&perpage=25&pricepoint=7
- link "$25.00 - $49.99 (2)":
  - /url: https://academybugs.com/my-cart/?&perpage=25&pricepoint=2
- link "$50.00 - $99.99 (3)":
  - /url: https://academybugs.com/my-cart/?&perpage=25&pricepoint=3
- link "$100.00 - $299.99 (11)":
  - /url: https://academybugs.com/my-cart/?&perpage=25&pricepoint=4
- link "Greater Than $299.99 (1)":
  - /url: https://academybugs.com/my-cart/?&perpage=25&pricepoint=5
- heading "Shopping Cart" [level=4]
- link "Shopping Cart (1)":
  - /url: "#"
- heading "Your Account" [level=4]
- text: Email Address*
- textbox
- text: Password*
- textbox
- paragraph:
  - link "Sign Up":
    - /url: https://academybugs.com/account/?ec_page=register
- button "SIGN IN"
- contentinfo:
  - list:
    - listitem:
      - link "uTest":
        - /url: https://www.utest.com/academy
        - img "uTest"
    - listitem:
      - link "Terms & Conditions":
        - /url: https://www.utest.com/terms-and-conditions
    - listitem:
      - link "Privacy Policy":
        - /url: https://www.utest.com/privacy-policy
- link "":
  - /url: "#"
```

# Test source

```ts
   22 |         this.quantityField = page.locator('#ec_quantity')
   23 |         this.updateQuantityButton = page.getByText('UPDATE')
   24 |     }
   25 |
   26 |     // изменение валюты товара на евро
   27 |     async changeCurrencyEUR(){
   28 |         await this.currencyDropdown.waitFor({ state: 'attached' });
   29 |         await this.currencyDropdown.waitFor({ state: 'visible' });
   30 |         await this.currencyDropdown.selectOption('EUR');
   31 |         await this.page.waitForTimeout(1000); //тот самый таймаут
   32 |         await this.currencyDropdown.dispatchEvent('change');
   33 |     }
   34 |
   35 |     // переход на страницу производителя
   36 |     async gotoManufacturer(){
   37 |         await this.manufacturerCard.waitFor({ state: 'attached' });
   38 |         await this.manufacturerCard.waitFor({ state: 'visible' });
   39 |         await this.manufacturerCard.click({ force: true });
   40 |     }
   41 |
   42 |     // переход на страницу Твиттера
   43 |     async gotoTwitter(){
   44 |         await this.twitterButton.waitFor({ state: 'attached' });
   45 |         await this.twitterButton.waitFor({ state: 'visible' });
   46 |         await this.twitterButton.click();
   47 |     }
   48 |
   49 |     // переход на страницу My Space
   50 |     async gotoMySpace(){
   51 |         await this.mySpaceButton.waitFor({ state: 'attached' });
   52 |         await this.mySpaceButton.waitFor({ state: 'visible' });
   53 |         await this.mySpaceButton.click({ force: true });
   54 |         await this.errorMySpace.click({ force: true });
   55 |     }
   56 |     
   57 |     // переход на страницу браслета (hot item)
   58 |     async gotoHotItem(){
   59 |         await this.hotItemCard.waitFor({ state: 'attached' });
   60 |         await this.hotItemCard.waitFor({ state: 'visible' });
   61 |         await this.hotItemCard.click({ force: true });
   62 |         await this.loaderHotItem.waitFor({ state: 'attached' });
   63 |         await this.loaderHotItem.waitFor({ state: 'visible' });
   64 |         await this.loaderHotItem.click({ force: true });
   65 |     }
   66 |
   67 |     // добавление комментария к товару
   68 |     async postComment(name, email, text){ 
   69 |         await this.nameInput.click();
   70 |         await this.nameInput.fill(name);
   71 |         await this.emailInput.click();
   72 |         await this.emailInput.fill(email);
   73 |         await this.textInput.click();
   74 |         await this.textInput.fill(text);
   75 |         await this.postCommentButton.click();
   76 |     }
   77 |
   78 |     // фильтрация товаров по цене
   79 |     async filterByPrice(){
   80 |         await this.filterByPriceItem.waitFor({ state: 'attached' });
   81 |         await this.filterByPriceItem.waitFor({ state: 'visible' });
   82 |         await this.filterByPriceItem.click({ force: true });
   83 |     }
   84 |
   85 |     // клик по кнопке Sign In
   86 |     async gotoSignIn(){
   87 |         await this.signInButton.waitFor({ state: 'attached' });
   88 |         await this.signInButton.waitFor({ state: 'visible' });
   89 |         await this.signInButton.click({ force: true });
   90 |     }
   91 |
   92 |     // переход на страницу Sign Up
   93 |     async gotoSignUp(){
   94 |         await this.signUpButton.waitFor({ state: 'attached' });
   95 |         await this.signUpButton.waitFor({ state: 'visible' });
   96 |         await this.signUpButton.click({ force: true });
   97 |     }
   98 |
   99 |     // переход на страницу описания товара
  100 |     async gotoDescription(){
  101 |         await this.descriptionButton.waitFor({ state: 'attached' });
  102 |         await this.descriptionButton.waitFor({ state: 'visible' });
  103 |         await this.descriptionButton.click();
  104 |     }
  105 |
  106 |     // добавление товара в корзину
  107 |     async addToCart(){
  108 |         await this.addToCartButton.waitFor({ state: 'attached' });
  109 |         await this.addToCartButton.waitFor({ state: 'visible' });
  110 |         await this.addToCartButton.click();
  111 |     }
  112 |
  113 |     // получение цены товара
  114 |     async getTotalPrice(){
  115 |         await this.totalPriceButton.waitFor({ state: 'attached' });
  116 |         await this.totalPriceButton.waitFor({ state: 'visible' });
  117 |         await this.totalPriceButton.click({ force: true });
  118 |     }
  119 |
  120 |     // изменение количества товара в корзине
  121 |     async updateQuantity(){
> 122 |         await this.quantityField.waitFor({ state: 'attached' });
      |                                  ^ Error: locator.waitFor: Test timeout of 60000ms exceeded.
  123 |         await this.quantityField.waitFor({ state: 'visible' });
  124 |         await this.quantityField.click();
  125 |         await this.quantityField.fill('43');
  126 |         await this.updateQuantityButton.click();
  127 |     }
  128 | }
```